<!DOCTYPE html>
<html ng-app="FablePlayer">
<head>
	<title>Fable-Player</title>
	<script type="text/javascript" src="lib/angular.js"></script>
	<script type="text/javascript" src="lib/angular-simple-sprite.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/animate.css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<style>
* {
 	margin:0;
    text-shadow: 1px 0px 0px blue, 
                 -1px 0px 0px blue, 
                 0px 1px 0px blue, 
                 0px -1px 0px blue;
    font-size: 100%;
    font-weight: bold;
    color: #FFF;
 }
</style>
<body>
	<fable width="1000" height="600">
			<page id="1" bg-image="graphics/BG.png" bg-sound="graphics/theme.mp3" transition="animated fadeIn">
				<div class="title" id="title" left="280" top="50" transition="animated jackInTheBox">Uma jornada inesperada</div>
				<!--EÄ filho da luz-->
				<agent id="inicio">
					<state  id="text1">
						<div left="550" top="220" width="400" font-size="30" font-color="black">
						<p transition="animated rollIn">Era uma vez um pequeno garoto muito amigo do Sol</p>
			  			</div>
						<on-touch>
							<change-state target="text2"/>
						</on-touch>
					</state>
					<state id="text2">
						<div class="negrito" left="550" top="220" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >Ele conversava muito com o Sol em muitas de suas viagens, porém um dia...</p>
			        	</div>
						<on-touch>
							<change-state target="text3"/>
						</on-touch>
					</state>
					<state id="text3">
						<div left="550" top="220" width="400" font-size="25" font-color="red">
			           		<p transition="animated rollIn">Ao  acordar percebeu que o Sol não brilhava mais, questionou-se o motivo disso, e ao refletir sobre lembrou-se da rivalidade do Sol com a sua irmã adotiva a Lua...(melhor falar sobre ela baixinho pois ela pode estar escutando).</p>
			        	<on-touch>
						<emit event="next_page"></emit>
					    </div>
					</state>					
				</agent>
			</page>
			<!--Inicio da jornada-->
			<page id="2" bg-image="graphics/BG2.png" transition="animated fadeIn" >
			<img src="graphics/Moon.png" width="105" height="105" left="655" top="170"></img>
			<img src="graphics/char2.png" width="175" height="170" left="300" top="360"></img>	
				<agent id="jornada">
					<state id="text_jornada">
						<div left="50" top="70" width="400" font-size="20" font-color="red">
				    		<p transition="animated rollIn">Então ao ver a situação em que o mundo se encontrava, ele partiu mais rápido que o vento e embarcou numa jornada que o levaria para perigos e lugares além de sua imaginação...</p>
				    		<on-touch>
					<!--ao tocar no texto pular para a próxima página-->
							<emit event="next_page"></emit>
			    		</div>     	
					</state>
				</agent>
			</page>
			<!--Página 3 Entrada da Caverna-->
			<page id="3" bg-image="graphics/BG3.png" bg-sound="graphics/forest_song.m4a">
			<!--Eärendel-->
			<img class="char-rotation" src="graphics/char.png" width="100" height="130" left="150" top="450"></img>
			<!--Skullkid-->
			<img src="graphics/skull.png" width="160" height="200"left="5" top="335"></img>
				<agent id="textoPagina2">
					<!-- Textos da interação entre o skull kid/garoto e o earandel-->
					<state id="text1">
						<div left="60" top="50" font-size="24" width="485">
							<p transition = "animated fadeIn"> Após alguns dias explorando a floresta de Doriath(que ainda possui um pouco da luz do sol) em busca da maçã, Eärandel encontra o garoto dos três troncos ou SkullKid como é conhecido nas redondezas.Seria ele o guardião da maçã?</p>
						</div>
						<on-touch>
							<change-state target="text2"/>
						</on-touch>
					</state>

					<state id="text2">
						<div left="150" top="80" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >Ao que parece, sim ele é o guardião.O garoto parece estar disposto a entregar a maçã com uma pequena condição...</p>
			        	</div>
						<on-touch>
							<change-state target="text3"/>
						</on-touch>
					</state>

					<state id="text3">
						<div left="150" top="80" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >Você deve responder uma charada, e a charada é...</p>
			        	</div>
						<on-touch>
							<change-state target="text4"/>
						</on-touch>
					</state>

					<state id="text4">
						<div left="150" top="80" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >Como a morte, não tenho calor
								   <p transition="animated rollIn" >Vivo, mas sem respirar
										<p transition="animated rollIn">Sem sede, sempre a beber
											 <p transition="animated rollIn">Encouraçado, sem tilintar
							</p>
			        	</div>
						<on-touch>
							<change-state target="text5"/>
						</on-touch>
					</state>

					<state id="text5">
						<div left="150" top="80" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >Eärandel pensou e pensou, mas de nada adiantou mas quando estava prestes a desistir, olhou um peixe que saiu do lago próximo ao garoto</p>
			        	</div>
						<on-touch>
							<change-state target="text6"/>
						</on-touch>
					</state>

					<state id="text6">
						<div left="150" top="80" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >No momento em que peixe caiu no pé do garoto, ele levou um susto e falou</p>
			        	</div>
						<on-touch>
							<change-state target="text7"/>
						</on-touch>
					</state>
					<state id="text7">
						<div left="150" top="80" width="400" font-size="25" font-color="black">
			            	<p transition="animated rollIn" >“Ugh!”, disse ele, “é gelado e viscoso!”  então Eärandel adivinhou. “Peixe! Peixe!”, gritou. “É um peixe!”
			            	</p>
			        	</div>
			        	<on-touch>
							<change-state target="text8"/>
						</on-touch>
					</state>
					<state id="text8">
						<div left="150" top="80" width="400"	font-size="25" font-color="black"
						<p trasition="animated rollIn" >Meus parabéns, vá nas árvores que estão nas suas costas e interaja com elas, após isso os ventos iram trazer a maçã que você tanto almeja, até logo filho do sol, bons olhos o vejam...
						</div>
						<on-touch>
							<change-state target="text9"/>
						</on-touch>
					</state>
					<state id="tex9">
						<div left="150" top="80" width="400" font-size="25" font-color="black"
						<p trasition="animated rollIn" > Agora use brilho da maçã para seguir adiante, ative o portal usando a maçã!
						</div>
					</state>

				<!--Maçã e suas configurações-->
				<agent id="maçã">
					<property name="golden_apple" value="false">
					<state id="perdida"></state>
					<state id="encontrada">
					<img transition="animated infinite tada" src="graphics/golden.png" left="100" top="220" width="50" height="50"/>
					<on-touch>
						<set target="golden_apple" value="true"></set>
						<change-state target="guardada"></change-state>
					</on-touch>
					</state>
					<state id="guardada">
					<img transition="animated fadeOut" src="graphics/golden_apple.png" left="100" top="220" width="50" height="50"/>
				</state>
				</agent>

					<!--Texto maçã-->
					<state id="texto_maçã">
						<div left="400" top="20" width="500" font-size="30">
							<p transition="animated fadeIn">Você encontrou a maçã dourada!Use ela para ativar o portal adiante , quem sabe o que há lá dentro...</p>
						</div>
					</state>
				</agent>
				<!--localização e função das árvores-->
				<agent id="arvore1">
					<state id="verifica">
						<img id="um"  src="graphics/arvore1.png"  left="520" top="243"/>
						<on-touch>
						<change-state target="verificado"/>
						</on-touch>
					</state>

					<state id="verificado">
						<trigger agent="maçã" change-state="encontrada"></trigger>
						<trigger agent="textoPagina2" change-state="texto_maçã"></trigger>
						<on-touch>
							<alert on-start="true">maçã encontrada!</alert>
							<img id="um" transition="animated tada" src="graphics/arvore1.png"  left="520" top="243"/>
						</on-touch>
					</state>
				</agent>
				<!--entrada da caverna e seus estados(aberta e fechada)-->
				<agent id="portal_negro">
					<state id="fechada">
					 <on-touch>
						<img id="portal_desativado" src="graphics/darkportal1.png" left="335" top="405" width="180" height="170"/>
						<test target="golden_apple" value="true">
						<execute action="changeState" target="aberta"></execute>
						</test>
						<test target="golden_apple" value="false">
						<execute action="changeState" target="fechada"></execute>
						</test>
					 </on-touch>
					</state>
				<!--Configuração  do portal aberto--> 
					<state id="aberta">
						<on-touch>		
							 <img id="portal_ativado" src="graphics/darkportal.png" left="335" top="405" width="180" height="170"/>
							<emit event="next_page"></emit>
						</on-touch>
					</state>
				</agent>
			</page>
			<!--Página 3 CAVERNA E OS MAGOS-->
		<page id="4"  bg-image="graphics/BG4.png" bg-sound="graphics/cave_song.m4a">
		<img class="char-rotation" src="graphics/char.png" width="120" height="120" left="700" top="420"></img>
				<style>
				.char-rotation {
					transform: rotateY(180deg);
				}
				</style>
			<img  class="char-rotation" src="graphics/Mage_3.gif" width="320" height="320" left="245" top="150"></img>
			<img src="graphics/Mage_2.gif" width="320" height="320" left="35" top="150"></img>
			<img src="graphics/bonfire_2.gif" width="100" height="100" left="850" top="425"></img>

			<!-- texto inicial da caverna-->
			<agent id = "Caverna">
				<state id="text10">
				<div left="500" top="80" width="400" font-size="20" font-color="yellow">
			           <p transition="animated rollIn"> Ao entrar na caverna Eärendel da de cara com dois sujeitinhos peculiares, ao que parece são dois magos, dois primos em setimo grau, os magos Medvih e Mádvih.Aparentemente estavam discutindo sobre como fazer os feijões crescerem mais rápidos se utilizarem cocô de um Troll da floresta parda...</p>
			    </div>
			        	<on-touch>
							<change-state target="text11"/>
						</on-touch>
				</state>
				<state id="text11">
				<div left="500" top="80" width="350" font-size="20" font-color="red">
			           <p transition="animated rollIn" >De repente o mago Medvih falou:</p>
			    </div>
			       		<on-touch>
							<change-state target="text12"/>
						</on-touch>
				</state>
				<state id="text12">
					<div left="500" top="80" width="400" font-size="20" font-color="green">
				           <p transition="animated rollIn" > "Que sujeito curioso esse que adentrou em nossa caverna Madvih meu irmão!
				            </p>
				    </div>
				        	<on-touch>
								<change-state target="text13"/>
							</on-touch>
				</state>
				<state id="text13">
					<div left="500" top="80" width="400" font-size="20" font-color="yellow">
				           <p transition="animated rollIn" >Então Madvih também falou:</p>
				    </div>
				        	<on-touch>
								<change-state target="text13_1"/>
							</on-touch>
				<state id="text13_1">
					<div left="500" top="80" width="400" font-size="20" font-color="yellow">
					<p transition="animated rollIn" >De fato,  o rapaz é  muito corajoso devo parabenizá-lo, porém não há tempo para enaltece-lo, o Sol necessita de nossa ajuda lembre-se disto, então certamente será ele que vai entrar no portal da água, viajar para o reino dos Eternos e derrotar aquele cara que guarda o poderoso elixir, engraçado não to me lembrando do nome dele.</p>
				    </div>
				   <on-touch>
							<change-state target="text14"/>
							</on-touch>
				</state>
				<state id="text14">
					<div left="500" top="80" width="400" font-size="25" font-color="red">
				           <p transition="animated rollIn" >Enfim, não há mais tempo para conversa, vá, nem tente entrar no outro portal, somente há tristeza naquele lugar.Você tem o poder de muda-lo mas não agora...
				            </p>
				    </div>
				        	<on-touch>
								<change-state target="text15"/>
							</on-touch>
				</state>
				<state id="text15">
					<div left="500" top="80" width="400" font-size="23" font-color="green">
				           <p transition="animated rollIn" > ENTRE NO PORTAL AZUL AGORA GAROTO, O FUTURO DO MUNDO DEPENDE DE VOCÊ!
				            </p>
				    </div>
			    </state>
			</agent>
				<!-- CONFIGUÇÃO DOS DOIS PORTAIS, PORTAL1=VERMELHO, PORTAL2=AZUL-->
				<agent id="portal_do_meio">
					<state>
						<on-touch>
							<img id="portal_do_meio" src="graphics/portal1.png" left="10" top="260" width="80" height="140"/>
							<emit event="goto_page" number="5"></emit>
						</on-touch>
					</state>
				</agent>
				
				<agent id="portal_de_baixo">
					<state>
						<on-touch>
							<img id="portal_de_baixo" src="graphics/portal2.png" left="10" top="400" width="80" height="140"/>
							<emit event="goto_page" number="7"></emit>
						</on-touch>
					</state>
				</agent>

				<agent id="portal_da_feiticeira">
					<state>
						<on-touch>
							<img class="char-rotation" id="portal_da_feiticeira" src="graphics/portal_da_feiticeira.gif" left="10" top="120" width="80" height="140"/>
							<emit event="goto_page" number="6"></emit>
						</on-touch>
					</state>
				</agent>

		<agent id="bonfire_lit">
			<state>
				<on-touch>
					<img id="bonfire_lit" src="graphics/bonfire_2.gif" width="100" height="100" left="850" top="425"/>
					<emit event="goto_page" number="8"></emit>
				</on-touch>
			</state>		
		</agent>
		</page>
			<!--Página 4 Ornstein E O  ELIXIR-->
			<page id="5" bg-image="graphics/BG5.png" bg-sound="graphics/gwyn_song.m4a">
			<!--PERSONAGEM LOCALIZAÇAO E MEDIDAS-->
			<img src="graphics/char.png" width="100" height="130" left="200" top="400"/>
				<state id="text16">
					<div left="85" top="80" width="400" font-size="19" font-color="white">
				          <p transition="animated rollIn" > Você chegou na terra dos Eternos, este na sua frente é Ornstein O Assassino de Dragões, ele guarda o elixir...
				           	</p>
				           		<p transition="animated rollIn">Use a Anglachel(não a tem?lascou pra você, se tentar atacar ele, provavel que ele te transforme em um pedaço de chuchu, pelo menos é aquilo que me disseram) para derrotar Ornstein!e colete o elixir que ele irá soltar o mais rápido possível</p>
				  	</div>
			    </state>
			<!--Batalha com o Ornstein-->
			<agent id="Ornstein">
				<state id="Vivo">
					<on-touch>
						<img class="char-rotation" id="Vivo" src="graphics/BOSS.gif" left="350" top="100" width="500" height="450">
						<test target="magic_sword" value="true">
							<execute action="changeState" target="derrotado"></execute>
						</test>
						 <test target="magic_sword" value="false">
							<execute action="changeState" target="imortal"></execute>
						</test>
					</on-touch>
				</state>
				<!--Se tiver a espada-->
				<state id="derrotado">
					<div left="600" top="80" width="400" font-size="19" font-color="white">
						<p transition="animated rollIn"> Você derrotou Ornstein e obteve o elixir dos Eternos, agora volte para a caverna e entre no outro portal para podermos acabar com isso de uma vez por todas</p>
					</div>
				<img transition="animated fadeOut" id="Vivo" src="graphics/explosion.png" left="350" top="100" width="500" height="450"/>
					<trigger agent="elixir" change-state="encontrado"></trigger>
					<on-touch>
						<change-state target="guardado"></change-state>
					</on-touch>
				</state>
				<!--Se nao tiver nada-->
				<state id="imortal">
					<div left="600" top="80" width="400" font-size="20" font-color="white">
						<p transition="animated rollIn"> Você falhou e foi morto por Ornstein, da próxima vez use equipamentos melhores, se é que me entende.Sorte é para os fracos!</p>
					</div>
					<img class="char-rotation"  id="vivo" src="graphics/BOSS.gif" left="350" top="100" width="500" height="450">		
				</state>
			</agent>
			<!-- Elixir dos eternos e seus comandos-->
			<agent id="elixir">
				<property name="antidote" value="false">
				<state id="perdido"></state>
				</state>
				<state id="encontrado">
					<img src="graphics/elixir.png" left="600" top="480" width="80" height="80"/>
					<on-touch>
						<set target="antidote" value="true"></set>
						<change-state target="guardado"></change-state>
					</on-touch>
				</state>
				<state id="guardado">
					<img transition="animated fadeOut" src="graphics/elixir.png" left="600" top="480" width="80" height="80"/>
					<trigger agent="avisoElixir" change-state="elixirEncontrado"></trigger>
				</state>
			</agent>
			<!--PORTAL PARA VOLTAR PARA A CAVERNA-->
				 <agent id="portal_do_meio">
					<state id="inicial">
					<on-touch>
						<img id="portal_do_meio" src="graphics/portal1.png" left="60" top="370" width="100" height="160"/>
						<emit event="goto_page" number="4"></emit>
					</on-touch>
					</state>
	 			 </agent>
            </page>
            <!--Página 6, Caverna da feiticeira segundo portal-->
     	<page id="6" bg-image="graphics/BG_MAGA.gif" bg-sound="graphics/caverna_da_feiticeira.mp3">
          <img src="graphics/char.png" width="120" height="130" left="410" top="390"/>
			<agent id="cave_text">
				<state id="text17">
					<div left="200" top="80"  font-size="20" font-color="yellow">
				          <p transition="animated rollIn" >Então que lugar é esse?Eärendel pensou consigo mesmo:"Que lugar estranho..."</p>
				           <p transition="animated rollIn">"Uma feiticeira, quem será ela?"</p>
				    </div>       
				           <on-touch>
								<change-state target="text18"/>
							</on-touch>
				</state>	
				
				<state id="text18">
					<div left="130" top="50" width="400"  font-size="20" font-color="yellow">
				          <p transition="animated rollIn" > Então em sua mente veio uma lembraça de sua infancia, em que seus pais contavam a história de Galadriel uma bela e poderosa feiticeira, que foi corrompida pela Lua e trancafiada na caverna do Ginnungagap </p>
				           <p transition="animated rollIn">A caverna onde os primeiros anões surgiram, e eles forjaram a Anglachel a única lâmina capaz de ferir o temido Ornstein.</p>
				    </div>
				    <on-touch>
				    	<change-state target="text19"/>
				</state>
				<state id="text19">
					<div left="130" top="50" width="400"  font-size="20" font-color="yellow">
						<p transition="animated rollIn">Agora, a feiticeira acordou e ela guarda a espada, lute contra a poderosa Maria para ter a posse da lendária Anglachel.</p>
					</div>
				</state>
		 	</agent>
		 	<!--Lady Maria configurações para o drop da espada etc-->
            <agent id="Lady Maria">
				<state id="Viva">
					<on-touch>
						<img id="Viva" src="graphics/Maga.gif" left="580" top="240" width="260" height="270">
						<change-state target="morta"></change-state>
					</on-touch>
				</state>
				<state id="morta">
					<img transition="animated fadeOut" id="vivo" src="graphics/explosion.png" left="670" top="280" width="210" height="250"/>
					<trigger agent="sword" change-state="encontrado"></trigger>
					<on-touch>
						<change-state target="destruida"></change-state>
					</on-touch>
				</state>
				<state id="destruida">
				</state>
			</agent>
			<!--configuração de armazenamento a espada e seua funcionamento--> 
			<agent id="sword">
				<property name="magic_sword" value="false">
				<state id="perdido"></state>
				</state>
				<state id="encontrado">
					<img src="graphics/magic_sword.gif" left="670" top="450" width="90" height="90"/>
					<on-touch>
						<set target="magic_sword" value="true"></set>
						<change-state target="guardado"></change-state>
					</on-touch>
				</state>
				<state id="guardada">
					<img transition="animated fadeOut" src="graphics/magic_sword.gif" left="670" top="450" width="90" height="90"/>
					<trigger agent="avisoEspada" change-state="swordFound"></trigger>
				</state>
			</agent>
			
			<!--PORTAL PARA VOLTAR PARA A CAVERNA-->
				 <agent id="portal_da_feiticeira">
					<state id="inicial">
					<on-touch>
						<img class="char-rotation" id="portal_da_feiticeira" src="graphics/portal_da_feiticeira.gif" left="90" top="310" width="100" height="160"/>
						<emit event="goto_page" number="4"></emit>
					</on-touch>
					</state>
	 			 </agent>
         	</page>
			<!--Página extra Artorias e Sif-->
			<page id="8" transition="animated fadeIn" bg-image="graphics/BG_EXTRA.gif" bg-sound="graphics/artorias_and_sif.mp3">
			<!--Sif-->
			<img src="graphics/sif.gif" left="410" top="400" width="160" height="170">
			<img src="graphics/char.png" width="120" height="130" left="210" top="420"/>
			<agent id="Texto Artorias e Sif">
				<state id="secret1">
					<div left="50" top="0" width="400"   font-size="20" font-color="black">
				          <p transition="animated rollIn"> ????????</p>
				          <p transition="animated rollIn">	Que lugar é esse?Aquele é...não pode ser...O lendário Artorias, o que ele estaria fazendo num lugar como esse?</p>
				    </div>
				    <on-touch>
				    	<change-state target="secret2"/>
				    </on-touch>
				</state>
				<state id="secret1_1">
					<div left="50" top="10" width="400"   font-size="20" font-color="black">
						<p transition="animated rollIn">Logo ele que era o melhor amigo de Ornstein, por que ele teria se auto-exilado em um lugar como esse?</p>
				          <p transition="animated rollIn">Acredito que tem alguma relação com o fato de Ornstein ter sido corrompido e ter ficado malvado e então para não se ver obrigado a matar seu melhor amigo, Artorias se exilou nesse reino paralelo, e todo dia entoa um lamento para seu amigo perdido...</p>
				    </div>
				    <on-touch>
				    	<change-state target="secret2"/>
				    </on-touch>
				</state>
				<state id="secret2">
					<div left="50" top="0" width="400"  font-size="20" font-color="black">
				          <p transition="animated rollIn"> No momento em que Eä pensava, Artorias respondeu:</p>
				          <p transition="animated rollIn"> Garoto, devo elogiar sua coragem em vir aqui, o que deseja?minha loba Sif me contou que você possui um coração puro e repleto de compaixão, isso me alegra, pois vivo neste exilio e tudo que me rodeia é tristeza.E mais nada...</p>
				    </div>
				    <on-touch>
				    	<change-state target="secret3"/>
				    </on-touch>
				</state>
				
				<state id="secret3">
					<div left="50" top="0" width="400"  font-size="20" font-color="black">
						<p transition="animated rollIn"> Não se passa um minuto sem que eu me lembre de Ornstein e tudo em que ele  fez e se transformou, mas vejo que você pode me libertar desse fardo.</p>
				          <p transition="animated rollIn">Ele me soltou uma maldição, em que eu jamais poderei ser morto ou me matar, porém ele falou que somente um ser de um coração extremamente bondoso poderia me libertar e deixar eu ver meus antepassados</p>
				    </div>
				    <on-touch>
				    	<change-state target="secret5"/>
				    </on-touch>
				</state>
				</state>
				<state id="secret5">
					<div left="50" top="50"  width="400"  font-size="20" font-color="red">
						<p transition="animated rollIn"> Por favor liberte-me dessa vida dolorosa, deixo a você meu anel, talvez seja útil contra Ornstein</p>
						<p transition="animated rollIn"> E a você Sif, cuide-se, sabes que és a melhor amiga que já tive e sempre estará em minha mente e meu coração, adeus minha querida</p>
					</div>
					 <on-touch>
				    	<change-state target="secret6"/>
				    </on-touch>
				</state>
				<state id="secret7">
					<div left="50" top="50"  width="400"  font-size="20" font-color="red">
						<p transition="animated rollIn">Que o tempo a traga de volta para mim</p>
						<p transition="animated fadeIn">(liberte Artorias de seu fardo(clique nele))</p>
					</div>
				</state>		
			</agent>
			
			<!--Artorias-->
			<agent id="Artorias">
				<state id="Vivo">
					<on-touch>
						<img class="char-rotation" id="Vivo" src="graphics/Artorias.gif" left="570" top="220" width="260" height="270">
						<change-state target="morto"></change-state>
					</on-touch>
				</state>
				<state id="morto">
					<img transition="animated fadeOut" id="vivo" src="graphics/Wave.gif" left="490" top="300" width="400" height="250"/>
					<trigger agent="ring" change-state="encontrado"></trigger>
					<on-touch>
						<change-state target="destruida"></change-state>
					</on-touch>
				</state>
				<state id="destruida">
				</state>
			</agent>
		
		<!--Funcionamento do O Um Anel-->
		<agent id="ring">
			<property name="magic_ring" value="false">
				<state id="perdido"></state>
				<state id="encontrado">
					<img src="graphics/one_ring.gif" left="670" top="450" width="90" height="90"/>
					<on-touch>
						<set target="magic_ring" value="true"></set>
						<change-state target="guardado"></change-state>
					</on-touch>
				</state>
				<state id="guardada">
					<img transition="animated fadeOut" src="graphics/one_ring.gif" left="670" top="450" width="90" height="90"/>
				</state>
		</agent>

		<!--Voltar para a caverna-->
		<agent id="bonfire_lit">
				<state id="inicial">
					<on-touch>
					<img id="bonfire_lit" src="graphics/bonfire_2.gif" width="100" height="100" left="50" top="425"/>
					<emit event="goto_page" number="4"></emit>
					</on-touch>
				</state>		
		</agent>
	</page>
				<!--Página 7 Céu-->
			<page id="7" bg-image="graphics/BGSKY.png" bg-sound="graphics/end_song.mp3">
			
			<img src="graphics/clouds.png" width="250" height="225" left="200" top="375"/>
			
			<img src="graphics/char3.png" width="100" height="130" left="240" top="300"/>

			<agent id="Sol">
				<state id="parado">
					<on-touch>
						<img id="sun" src="graphics/bad.moon.png" left="800" top="100" width="230" height="230"/>
						<test target="antidote" value="true">
							<execute action="changeState" target="recuperado"></execute>
						</test>
						<test target="antidote" value="false">
							<execute action="changeState" target="corrompido"></execute>
						</test>
					</on-touch>
				</state>
				<!--estado do sol voltando a vida-->
				<state id="recuperado">
					<trigger agent="Texto_Final" change-state="comElixir" ></trigger>
					<img id="sun" src="graphics/thug.png" left="820" top="80" width="200" height="200"/>
				</state>
				<!--estado do sol continuando a estar corrompido-->
				<state id="corrompido">
					<trigger agent="Texto_Final" change-state="semElixir"></trigger>
					<img id="sun" src="graphics/bad.moon.png" left="820" top="80" width="230" height="230"/>
				</state>
			</agent>

		<!--Texto do final bom e final ruim-->
			<agent id="Texto_Final">
				<state id="sem_ação">
					<div left="50" top="30" font-size="20" font-color="red">
						<p transition ="animated fadeIn">Agora é a hora de acabar de vez com isso, você vai pagar pelo que fez com o Sol!
					</p>
				</state>
				<state id="comElixir">
					<div left="50" top="30" font-size="20" font-color="yellow">
						<p transition="animated fadeIn">Você me salvou EÄ obrigado, devo a você minha gratidão eterna e lembre-se disso até mesmo nos lugares mais escuros, agora batizarei uma estrela em seu nome, que a luz de Eärandel ilumine o mundo.</p>
					</div>
				</state>
				<state id="semElixir">
					<div left="50" top="30" font-size="20" font-color="red">
						<p transition="animated fadeIn">Você cometeu um grave erro garoto em não ter trago o elixir AHAHAH, sua curiosidade custou a vida de seu amigo Sol AHAHAHAHA</p>
					</div>
				</state>
			</agent>
			</page>
	</fable>
</body>
</html>
